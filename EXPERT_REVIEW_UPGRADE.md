# 审稿系统优化升级说明

## 🎯 改进内容

### 1. 客观评分机制（0-100分制）

**改进前**：1-5分制，评分模糊
**改进后**：
- 每位专家评4个维度，每维度0-6.25分，小计25分
- 专家1（创新点）：25分
- 专家2（逻辑性）：25分
- 专家3（准确性）：25分
- 专家4（规范性）：分25分
- **总计：100分**

**Prompt优化**：
- 明确要求"客观、严谨、公正，但不悲观"
- "给出真实的评价，不讨好作者，也不过度批评"
- "既要指出不足，也要认可优点"

---

### 2. 中间层任务拆解AI

**流程**：
```
综合审稿意见 → 任务拆解AI → JSON任务列表 → 写作AI逐条执行
```

**任务结构**：
```json
{
  "task_id": 1,
  "priority": "高/中/低",
  "location": "章节/段落位置",
  "action": "添加/删除/修改/优化",
  "description": "具体修改要求",
  "expected_result": "期望达到的效果"
}
```

**优势**：
- 明确每个修改任务的具体要求
- 逐条执行，确保修改精准
- 避免一次性优化导致的不可控

---

### 3. 迭代优化循环（≥90分停止）

**流程**：
```
第1轮审稿 → 评分（如75分）→ 未达标 → 继续
第2轮审稿 → 评分（如85分）→ 未达标 → 继续
第3轮审稿 → 评分（如92分）→ 达标 ✓ → 停止
```

**配置**：
- 最多优化轮次：3轮
- 目标评分：≥90分
- 达标即停止，避免过度优化

---

## 🔄 完整流程图

```
论文初稿
  ↓
━━━━━━━━━━━━━━━━━━━━━
第N轮审稿优化（最多3轮）
━━━━━━━━━━━━━━━━━━━━━
  ↓
阶段1: 4专家并行审稿
├─ 专家1（创新点）→ X/25分
├─ 专家2（逻辑性）→ X/25分
├─ 专家3（准确性）→ X/25分
└─ 专家4（规范性）→ X/25分
  ↓
阶段2: 专家5整合意见
└─ 综合评分：X/100分
  ↓
【判断：≥90分？】
├─ 是 → 停止，输出最终论文
└─ 否 → 继续优化
  ↓
阶段3: 中间层AI拆解任务
└─ 输出：JSON任务列表
  [
    {task_id:1, priority:"高", ...},
    {task_id:2, priority:"中", ...},
    ...
  ]
  ↓
阶段4: 写作AI逐条执行
├─ 执行任务1 → 修改后论文v1
├─ 执行任务2 → 修改后论文v2
└─ ...
  ↓
本轮优化完成
  ↓
【循环判断】
├─ 评分≥90分 → 结束 ✓
├─ 轮次<3 → 返回"第N轮审稿优化"
└─ 轮次=3 → 强制结束
  ↓
最终论文 + 审稿报告
```

---

## 📊 输出文件

### 1. 最终论文
`output/论文初稿.md`

### 2. 审稿报告
`output/论文初稿_审稿报告.json`

**结构**：
```json
{
  "rounds": 2,  // 优化轮次
  "final_score": 91.5,  // 最终评分
  "all_reviews": [
    {
      // 第1轮
      "expert_reviews": {
        "innovation": {"feedback": "...", "score": 18.75},
        "logic": {"feedback": "...", "score": 20.00},
        "accuracy": {"feedback": "...", "score": 19.50},
        "norm": {"feedback": "...", "score": 22.00}
      },
      "integrated_feedback": "...",
      "task_list": [...],
      "综合评分": 80.25
    },
    {
      // 第2轮
      "expert_reviews": {...},
      "综合评分": 91.5
    }
  ]
}
```

---

## 🎯 关键改进点总结

1. **客观不讨好**：Prompt强调"不讨好作者"，给出真实评价
2. **严谨不悲观**：既指出不足，也认可优点
3. **100分制**：评分更精细化（25×4=100）
4. **任务拆解**：中间层AI确保修改精准可控
5. **循环优化**：最多3轮，≥90分自动停止
6. **全流程可追溯**：保存每轮审稿记录

---

**更新时间**：2025-12-20 19:10
**状态**：已完成并集成到主程序
